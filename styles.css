/* ===== v4: Low-end mobile performance + UX tweaks ===== */

:root{ --tabs-height:56px; }

* { -webkit-tap-highlight-color: transparent; }
html{ scroll-behavior:auto; } /* JS handles smooth anchor scroll only */

body{
  margin:0;
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:#2B241C;
  background:#0f0e0c; /* fallback */
  position:relative;
  -webkit-text-size-adjust:100%;
}

/* Scroll lock while lightbox is open */
.no-scroll{ position:fixed; overflow:hidden; width:100%; }

/* Fixed GPU background (no background-attachment:fixed) */
.background-overlay{
  position:fixed; inset:0;
  background:
    linear-gradient(rgba(0,0,0,.22), rgba(0,0,0,.22)),
    url("img/bg.jpg") center/cover no-repeat;
  z-index:-1;
  will-change: transform;
  transform: translateZ(0);
}

/* Hero: simple, cheap */
.hero{
  text-align:center;
  padding-bottom:.75rem;
  background:rgba(255,255,255,.92);
}
.hero-img{
  width:100%;
  max-height:200px;
  object-fit:cover;
  border-bottom:1px solid #E6DED2;
}
h1{
  font-family:'Playfair Display',serif;
  font-size:2rem;
  margin:.5rem 0;
}

/* Tabs carousel */
.tabs{
  position:sticky; top:0; z-index:10;
  display:flex; gap:.5rem;
  padding:.5rem .5rem .5rem .8rem;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior-x:contain;
  scrollbar-width:none; white-space:nowrap;
  background:#F7F1E8;
  border-bottom:1px solid #E6DED2;
  box-shadow:0 1px 3px rgba(0,0,0,.06);
}
.tabs::-webkit-scrollbar{ display:none; }

.tab{
  position:relative; display:inline-block;
  padding:.4rem 1rem;
  border-radius:18px;
  border:1px solid #C8A27A;
  background:#fff;
  color:#2B241C; text-decoration:none; font-weight:600;
  transition: background .15s ease, color .15s ease;
  touch-action: pan-x pinch-zoom;
  scroll-snap-align:center;
}
.tab.active{ background:#8B5E34; color:#fff; }

.tab-underline{
  position:absolute; bottom:0; left:0; height:3px; width:0;
  background:#8B5E34; border-radius:2px;
  transition: transform .18s ease, width .18s ease;
  will-change: transform, width;
  pointer-events:none;
}

/* Main layout */
.container{ padding:0.8rem; max-width:800px; margin:auto; }

/* Sections: anchor offset for sticky tabs */
.section{ scroll-margin-top: calc(var(--tabs-height) + 8px); }

/* Category title: visible "card" */
.section h2.category-title{
  display:inline-block;                /* looks like a card */
  color:#1E1710;
  background:#ffffff;                  /* strong contrast */
  border:1px solid #E6DED2;
  border-left:4px solid #8B5E34;       /* brand accent */
  border-radius:12px;
  padding:.5rem 1rem;
  box-shadow:0 1px 4px rgba(0,0,0,.08);
  margin:1rem auto .6rem;
}

/* Cards: light styles */
.card,.simple-card.big-card{
  display:flex; flex-direction:column; align-items:stretch;
  background:rgba(255,253,249,.97);
  border-radius:12px; box-shadow:0 1px 3px rgba(0,0,0,.12);
  padding:.75rem .9rem; margin:.55rem 0; gap:.45rem;
  contain: content;
}
.card-link{ text-decoration:none; display:block; color:inherit; }
.card{ flex-direction:row; align-items:center; justify-content:space-between; }
.card-text{ flex:1; }

.card-text h3{ margin:0 0 .28rem 0; font-size:1rem; }
.desc{ font-size:.92rem; margin:0; color:#2B241C; }
.gramaj{ font-size:.8rem; color:#7a6e60; margin:.18rem 0 .25rem; }
.price{ font-weight:700; color:#8B5E34; margin-top:.35rem; }
.card-img{
  width:132px; height:132px; object-fit:contain; background:#fff;
  border-radius:8px;
}

/* Tags */
.tags{ display:flex; flex-wrap:wrap; gap:.3rem; padding:0; margin:.3rem 0 0; list-style:none; }
.tags li{ background:#F4E7D7; border:1px solid #EBD5BE; border-radius:999px; padding:2px 6px; font-size:.7rem; }

/* Lightbox */
.lightbox{
  position:fixed; inset:0; display:flex; justify-content:center; align-items:center;
  background:rgba(0,0,0,.86);
  opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:100;
}
.lightbox.active{ opacity:1; pointer-events:auto; }
.lightbox-img{ max-width:90%; max-height:90%; border-radius:12px; box-shadow:0 4px 18px rgba(0,0,0,.5); }
.close-btn{ position:absolute; top:15px; right:15px; background:none; border:none; font-size:40px; color:#fff; cursor:pointer; }

/* Progressive enhancement: skip rendering offscreen in Chrome/Android */
@supports (content-visibility:auto){
  .section{ content-visibility:auto; contain-intrinsic-size: 600px 800px; }
}

/* Reduce animations on low-end / reduced motion */
@media (prefers-reduced-motion: reduce){
  *{ animation:none!important; transition:none!important; }
}
body.low-end .tab-underline,
body.low-end .card,
body.low-end .simple-card.big-card,
body.low-end .section h2.category-title{ transition:none!important; }

.hidden{ display:none!important; }


.card, .simple-card.big-card, .card-text, .card-text h3, .desc, .gramaj, .price { text-align:left; }

